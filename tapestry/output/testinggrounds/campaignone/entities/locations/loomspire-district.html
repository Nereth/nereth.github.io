<!DOCTYPE html>
<html lang="en">
<!-- tapestry_generated -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loomspire District - CampaignOne</title>
    <style>
/* Tapestry Static Site - Dark Theme */
:root {
    --bg-primary: #1a1a2e;
    --bg-secondary: #16213e;
    --bg-card: #1f2937;
    --bg-card-hover: #374151;
    --text-primary: #e5e7eb;
    --text-secondary: #9ca3af;
    --text-muted: #6b7280;
    --accent: #e94560;
    --accent-hover: #ff6b6b;
    --link: #60a5fa;
    --link-hover: #93c5fd;
    --border: #374151;
    --border-light: #4b5563;
    --success: #10b981;
    --warning: #f59e0b;
    --shadow: rgba(0, 0, 0, 0.3);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
    min-height: 100vh;
}

/* Layout */
.site-container {
    display: flex;
    min-height: 100vh;
}

.sidebar {
    width: 260px;
    background-color: var(--bg-secondary);
    border-right: 1px solid var(--border);
    padding: 1.5rem;
    position: fixed;
    height: 100vh;
    overflow-y: auto;
}

.main-content {
    flex: 1;
    margin-left: 260px;
    padding: 2rem;
    max-width: 1200px;
}

/* Navigation */
.site-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--accent);
    text-decoration: none;
    display: block;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
}

.site-title:hover {
    color: var(--accent-hover);
}

.nav-section {
    margin-bottom: 1.5rem;
}

.nav-section-title {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
}

.nav-list {
    list-style: none;
}

.nav-list a {
    display: block;
    padding: 0.5rem 0.75rem;
    color: var(--text-secondary);
    text-decoration: none;
    border-radius: 0.375rem;
    transition: all 0.15s ease;
}

.nav-list a:hover {
    background-color: var(--bg-card);
    color: var(--text-primary);
}

.nav-list a.active {
    background-color: var(--accent);
    color: white;
}

/* Content */
.page-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
}

.page-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.page-subtitle {
    font-size: 1rem;
    color: var(--text-secondary);
}

.breadcrumb {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--text-muted);
    margin-bottom: 1rem;
}

.breadcrumb a {
    color: var(--link);
    text-decoration: none;
}

.breadcrumb a:hover {
    color: var(--link-hover);
    text-decoration: underline;
}

.breadcrumb-separator {
    color: var(--text-muted);
}

/* Cards */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;
}

.card {
    background-color: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    padding: 1.25rem;
    transition: all 0.15s ease;
}

.card:hover {
    background-color: var(--bg-card-hover);
    border-color: var(--border-light);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--shadow);
}

.card-link {
    text-decoration: none;
    color: inherit;
    display: block;
}

.card-no-link {
    opacity: 0.7;
    cursor: default;
}

.card-no-link:hover {
    transform: none;
    box-shadow: none;
    background-color: var(--bg-card);
    border-color: var(--border);
}

.card-image {
    width: 100%;
    height: 180px;
    object-fit: cover;
    object-position: top;
    border-radius: 0.375rem;
    margin-bottom: 1rem;
}

.card-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.card-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.card-meta {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 0.75rem;
}

/* Entity Profile */
.entity-profile {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 2rem;
}

.entity-image-container {
    position: sticky;
    top: 2rem;
}

.entity-image {
    width: 100%;
    border-radius: 0.5rem;
    box-shadow: 0 4px 12px var(--shadow);
}

.entity-content {
    min-width: 0;
}

.entity-section {
    margin-bottom: 2rem;
}

.entity-section-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border);
}

.entity-section p {
    margin-bottom: 1rem;
}

/* Entity Links */
.entity-link {
    color: var(--link);
    text-decoration: none;
    border-bottom: 1px dotted var(--link);
}

.entity-link:hover {
    color: var(--link-hover);
    border-bottom-style: solid;
}

/* Entity Preview Tooltip */
.entity-tooltip {
    position: fixed;
    max-width: 280px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    padding: 0.75rem;
    box-shadow: 0 4px 16px var(--shadow);
    z-index: 1000;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
}

.entity-tooltip.visible {
    opacity: 1;
}

.entity-tooltip-image {
    width: 100%;
    height: 120px;
    object-fit: cover;
    object-position: top;
    border-radius: 0.375rem;
    margin-bottom: 0.5rem;
}

.entity-tooltip-name {
    font-weight: 600;
    font-size: 1rem;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.entity-tooltip-type {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: capitalize;
    margin-bottom: 0.5rem;
}

.entity-tooltip-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

/* Session Content */
.session-content {
    max-width: 800px;
}

.session-nav {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
}

.session-nav a {
    padding: 0.5rem 1rem;
    background-color: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 0.375rem;
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 0.875rem;
    transition: all 0.15s ease;
}

.session-nav a:hover {
    background-color: var(--bg-card-hover);
    color: var(--text-primary);
}

.session-nav a.active {
    background-color: var(--accent);
    border-color: var(--accent);
    color: white;
}

.story-text {
    font-size: 1.0625rem;
    line-height: 1.8;
}

.story-text p {
    margin-bottom: 1.25rem;
}

/* Tables */
.data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
}

.data-table th,
.data-table td {
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 1px solid var(--border);
}

.data-table th {
    background-color: var(--bg-secondary);
    font-weight: 600;
    color: var(--text-primary);
}

.data-table tr:hover td {
    background-color: var(--bg-card);
}

/* Search */
.search-container {
    position: relative;
    margin-bottom: 1.5rem;
}

.search-input {
    width: 100%;
    padding: 0.5rem 0.75rem;
    background-color: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 0.375rem;
    color: var(--text-primary);
    font-size: 0.875rem;
}

.search-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.2);
}

.search-input::placeholder {
    color: var(--text-muted);
}

.search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 0.375rem;
    margin-top: 0.25rem;
    max-height: 400px;
    overflow-y: auto;
    box-shadow: 0 4px 12px var(--shadow);
}

.search-result-item {
    display: block;
    padding: 0.75rem;
    border-bottom: 1px solid var(--border);
    text-decoration: none;
    color: inherit;
    transition: background-color 0.15s ease;
}

.search-result-item:last-child {
    border-bottom: none;
}

.search-result-item:hover {
    background-color: var(--bg-card-hover);
}

.search-result-type {
    font-size: 0.625rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.125rem;
}

.search-result-title {
    font-weight: 500;
    font-size: 0.875rem;
    color: var(--text-primary);
}

.search-result-title mark {
    background-color: var(--accent);
    color: white;
    padding: 0 0.125rem;
    border-radius: 0.125rem;
}

.search-no-results {
    padding: 0.75rem;
    color: var(--text-muted);
    font-size: 0.875rem;
    text-align: center;
}

/* Footer */
.site-footer {
    margin-top: 4rem;
    padding-top: 2rem;
    border-top: 1px solid var(--border);
    text-align: center;
    color: var(--text-muted);
    font-size: 0.875rem;
}

.site-footer a {
    color: var(--link);
    text-decoration: none;
}

.site-footer a:hover {
    text-decoration: underline;
}

/* Stats Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.stat-card {
    background-color: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    padding: 1.25rem;
    text-align: center;
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent);
}

.stat-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-top: 0.25rem;
}

/* Responsive */
@media (max-width: 1024px) {
    .entity-profile {
        grid-template-columns: 1fr;
    }

    .entity-image-container {
        position: static;
        max-width: 400px;
        margin: 0 auto 2rem;
    }
}

@media (max-width: 768px) {
    .sidebar {
        position: fixed;
        left: -260px;
        z-index: 1000;
        transition: left 0.3s ease;
    }

    .sidebar.open {
        left: 0;
    }

    .main-content {
        margin-left: 0;
        padding: 1rem;
    }

    .menu-toggle {
        display: block;
        position: fixed;
        top: 1rem;
        left: 1rem;
        z-index: 1001;
        background-color: var(--accent);
        color: white;
        border: none;
        padding: 0.75rem;
        border-radius: 0.375rem;
        cursor: pointer;
    }

    .card-grid {
        grid-template-columns: 1fr;
    }
}

@media (min-width: 769px) {
    .menu-toggle {
        display: none;
    }
}

/* Utility Classes */
.text-center { text-align: center; }
.text-muted { color: var(--text-muted); }
.mt-1 { margin-top: 0.5rem; }
.mt-2 { margin-top: 1rem; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
</style>
</head>
<body>
    <button class="menu-toggle" onclick="toggleMenu()">☰</button>
    <div class="site-container">
        <nav class="sidebar">
            <a href="../../index.html" class="site-title">CampaignOne</a>
            
        <div class="search-container">
            <input type="text" id="search-input" class="search-input"
                   placeholder="Search..." autocomplete="off"
                   data-base-path="../../">
            <div id="search-results" class="search-results"></div>
        </div>
        
            
        <div class="nav-section">
            <div class="nav-section-title">Entities</div>
            <ul class="nav-list">
                <li><a href="../../entities/characters/index.html">Characters</a></li>
                <li><a href="../../entities/locations/index.html" class="active">Locations</a></li>
                <li><a href="../../entities/factions/index.html">Factions</a></li>
            </ul>
        </div>
        
        <div class="nav-section">
            <div class="nav-section-title">Sessions</div>
            <ul class="nav-list">
                <li><a href="../../sessions/index.html">All Sessions</a></li>
            </ul>
        </div>
        
        <div class="nav-section">
            <div class="nav-section-title">Inventory</div>
            <ul class="nav-list">
                <li><a href="../../inventory/index.html">Campaign Inventory</a></li>
            </ul>
        </div>
        
        </nav>
        <main class="main-content">
            <nav class="breadcrumb"><a href="../../../index.html">Home</a><span class="breadcrumb-separator">›</span><a href="index.html">Locations</a><span class="breadcrumb-separator">›</span><span>Loomspire District</span></nav>
            
        <header class="page-header">
            <h1 class="page-title">Loomspire District</h1>
            <p class="page-subtitle">Location</p>
        </header>
        
            <div class="entity-content">
                
        <section class="entity-section">
            <h2 class="entity-section-title">Description</h2>
            <p>The Loomspire District clustered around a needlelike tower that gave it its name, a thicket of narrow brick mills and timbered workshops stitched together by pulley-lines, skywalks, and drying skeins of dyed thread. The air carried hot oil, damp wool, and sharp mordants; gutters bled color into mosaic-paved lanes while the rhythmic clatter of looms and treadles set a steady, mechanical heartbeat. Sunlight broke into bands through frames hung with warps, and clotheslines mapped low arcs across alleyways like threads on a loom.<br>Guildmarks of <a href="../../entities/factions/the-weavers-guild.html" class="entity-link entity-faction" data-entity-name="The Weavers&#39; Guild" data-entity-type="factions" data-entity-preview="The Weavers’ Guild, also known simply as the Weavers&#39; Guild, is the custodial order that tends the city’s fate-threads and maintains the stabilizing...">The Weavers&#39; Guild</a> hung from eaves and lintels—carved heddles, knotted motifs, and spool sigils—denoting guildhouses, dye-vats, and counting rooms. At the district’s core rose <a href="the-loomspire.html" class="entity-link entity-location" data-entity-name="The Loomspire" data-entity-type="locations" data-entity-preview="The Loomspire was a soaring tower of interwoven stone arches laced together by shimmering thread-bridges that spanned the voids between buttresses...">the Loomspire</a> itself, ringed with galleries like the rims of immense looms, its stone ribs bound in iron and its windows slit-thin. Lanterns tinted saffron and indigo cast a permanent dusk along the streets, and a faint, prickling hum seemed to live in the air, as if the whole place held a taut thread under tension.</p>
        </section>
        

        <section class="entity-section">
            <h2 class="entity-section-title">Significance</h2>
            <p>The Loomspire District mattered because it housed <a href="../../entities/factions/the-weavers-guild.html" class="entity-link entity-faction" data-entity-name="The Weavers&#39; Guild" data-entity-type="factions" data-entity-preview="The Weavers’ Guild, also known simply as the Weavers&#39; Guild, is the custodial order that tends the city’s fate-threads and maintains the stabilizing...">The Weavers&#39; Guild</a> and served as the origin point of the interference that had plagued the party. Once Lyrian identified it as the source, the district shifted from mere industrial quarter to primary objective; breaching <a href="the-loomspire.html" class="entity-link entity-location" data-entity-name="The Loomspire" data-entity-type="locations" data-entity-preview="The Loomspire was a soaring tower of interwoven stone arches laced together by shimmering thread-bridges that spanned the voids between buttresses...">the Loomspire</a> promised answers about the disturbance and the guild’s role, willing or otherwise, in generating it.</p>
        </section>
        

        <section class="entity-section">
            <h2 class="entity-section-title">Events</h2>
            <p>In Session-002, Lyrian traced the inexplicable interference to the Loomspire District, indicating <a href="the-loomspire.html" class="entity-link entity-location" data-entity-name="The Loomspire" data-entity-type="locations" data-entity-preview="The Loomspire was a soaring tower of interwoven stone arches laced together by shimmering thread-bridges that spanned the voids between buttresses...">the Loomspire</a> at its heart as the focal source. That confirmation reframed the guild banners and humming lines as signs of something active within the district, recasting a familiar quarter into a locus of disruption that demanded immediate attention.<br>The party moved on the district the same session, entering its webbed streets with the intent to breach the Loomspire. They threaded through guild yards and past dye-houses toward the tower, gauging approaches and preparing for an incursion into the guild’s seat of power. The sequence ended with them at the cusp of entry—interference at its strongest, the Loomspire before them, and the next step poised to reveal what lay behind the district’s disruptive weave.</p>
        </section>
        

        <section class="entity-section">
            <h2 class="entity-section-title">Appearances</h2>
            <p>Featured in sessions: 2</p>
        </section>
        
            </div>
            
        </main>
    </div>
    <script>var TAPESTRY_SEARCH_INDEX = [{"title": "Lyrien Vaust", "type": "Character", "url": "entities/characters/lyrien-vaust.html", "content": "Lyrien Vaust carried the composed gravity of a lifelong scholar-commander. In late middle age with silver-shot dark hair swept back from a thoughtful brow, she stood slender and straight-backed, her p"}, {"title": "Bronn Thale", "type": "Character", "url": "entities/characters/bronn-thale.html", "content": "Bronn Thale presents as a battle-weathered man in his late thirties to early forties, broad-shouldered and squared by years of drill. His skin is sun-browned and wind-chapped, a pale scar tracking fro"}, {"title": "Eris Vanthe", "type": "Character", "url": "entities/characters/eris-vanthe.html", "content": "Eris Vanthe was a woman in her mid-thirties with a lean, wiry build tempered by the strength of someone used to heat and weight. Soot smudged the pale angles of her face, and her close-cropped dark ha"}, {"title": "Varkessa Holt", "type": "Character", "url": "entities/characters/varkessa-holt.html", "content": "Varkessa Holt stands tall and broad-shouldered, a soldier\u2019s strength pared to efficiency. In their late thirties, they carry the weathered look of a veteran: iron-gray hair kept short at the sides, ke"}, {"title": "Thalen Reed", "type": "Character", "url": "entities/characters/thalen-reed.html", "content": "Thalen Reed is a lean, weathered human man in his late twenties, all stringed muscle and patient stillness. Dark hair is tied back to keep clear of a star-etched longbow that rarely leaves his shoulde"}, {"title": "Kivra Embercoil", "type": "Character", "url": "entities/characters/kivra-embercoil.html", "content": "Kivra Embercoil is a young fire genasi woman with a wiry, quick-moving build and ember-orange hair that flickers like banked coals. Constellations of glowing freckles scatter across her cheeks and col"}, {"title": "Brother Moss", "type": "Character", "url": "entities/characters/brother-moss.html", "content": "Brother Moss is a tall firbolg male with moss\u2011green fur and gentle, observant eyes. Their broad, soft build carries the quiet strength of old forests, and they move with an unhurried, grounded grace. "}, {"title": "Solaryn", "type": "Character", "url": "entities/characters/solaryn.html", "content": "Solaryn presents as an ageless, male figure whose presence bends easily past mortal measures. Tall and lean with a sun-sculpted build, they carry the quiet warmth of first light. Skin holds a soft aur"}, {"title": "Nymera", "type": "Character", "url": "entities/characters/nymera.html", "content": "Nymera presented as a woman of ageless, celestial poise, yet preferred they/them forms of address. Their build was tall and slender, movements unhurried, as if time bent politely around them. Starligh"}, {"title": "Korrun", "type": "Character", "url": "entities/characters/korrun.html", "content": "Korrun, known as the Iron Father, is most often depicted in iconography and manifested visions as an ageless, broad-shouldered figure with the weight and stillness of an anvil. They bear a masculine c"}, {"title": "The Nameless One", "type": "Character", "url": "entities/characters/the-nameless-one.html", "content": "The Nameless One appears as an ageless, androgynous figure whose features never quite settle, as if memory itself struggles to hold them in focus. Their build seems to shift with the light\u2014slender in "}, {"title": "Lyrian Vost", "type": "Character", "url": "entities/characters/lyrian-vost.html", "content": "Lyrian Vost is a woman in her middle years with a tall, spare build and a habit of holding herself ramrod-straight, as if bracing against an unseen current. She wears deep blue robes that take light l"}, {"title": "Gorin", "type": "Character", "url": "entities/characters/gorin.html", "content": "Gorin is widely described as a meticulous, middle\u2011aged figure with a compact, steady build and the self\u2011possessed poise of someone accustomed to locked rooms and ledgers. They favor understated, well\u2011"}, {"title": "Veyra Vost", "type": "Character", "url": "entities/characters/veyra-vost.html", "content": "Veyra Vost is a young adult woman with a lean, controlled carriage and silver eyes that gleamed like polished wire. A thread\u2011spool\u2013shaped scar marked her skin, an emblem as much as a wound, and her pr"}, {"title": "Master Helvran", "type": "Character", "url": "entities/characters/master-helvran.html", "content": "Master Helvran presented as a late\u2011middle\u2011aged, sparely built scholar whose posture carried the stoop of long study. Their ash-brown hair, streaked with silver, was pulled back neatly, and brass-rimme"}, {"title": "Veyrun", "type": "Location", "url": "entities/locations/veyrun.html", "content": "Veyrun was a world held in tense equilibrium: soot-dusted foundries and lantern-lit rail spurs pressed against wind-scoured cairns and rune-bitten menhirs. The land smelled of oil and ozone, hammered "}, {"title": "Ironwell", "type": "Location", "url": "entities/locations/ironwell.html", "content": "Ironwell is a fortified industrial city carved straight into the ribs of a canyon, its tiers hewn from dark stone and banded in riveted iron. Switchback avenues cling to the cliff face, while buttress"}, {"title": "Mirehollow", "type": "Location", "url": "entities/locations/mirehollow.html", "content": "Mirehollow is a mist-shrouded port city clinging to ancient seawalls and barnacled pilings, its skyline a ragged thicket of stilted warehouses, rope bridges, and slate-roofed tenements. Chill fog coil"}, {"title": "Astral Observatory", "type": "Location", "url": "entities/locations/astral-observatory.html", "content": "The Astral Observatory in Asterfall was a renowned dome of stone and brass, veined with runic inlays that glimmered faintly in starlight. Within, spiral galleries circled a great telescope and an arra"}, {"title": "The Astral Forge", "type": "Location", "url": "entities/locations/the-astral-forge.html", "content": "The Astral Forge is a looming arcane facility whose heart is a thunderous engine chamber, its brasswork conduits and suspended rings shedding a cold, star-lit glow. The air hums with restrained power "}, {"title": "Astor Falls Upper District", "type": "Location", "url": "entities/locations/astor-falls-upper-district.html", "content": "The Upper District of Astor Falls sat on high stone terraces, its broad plazas tied together by cut-stone steps and waist-high railings that looked over the lower quarters. On the night of the Starfal"}, {"title": "Loomspire District", "type": "Location", "url": "entities/locations/loomspire-district.html", "content": "The Loomspire District clustered around a needlelike tower that gave it its name, a thicket of narrow brick mills and timbered workshops stitched together by pulley-lines, skywalks, and drying skeins "}, {"title": "The Loomspire", "type": "Location", "url": "entities/locations/the-loomspire.html", "content": "The Loomspire was a soaring tower of interwoven stone arches laced together by shimmering thread-bridges that spanned the voids between buttresses like spun light. The air around it hummed with a low,"}, {"title": "Astor Falls", "type": "Location", "url": "entities/locations/astor-falls.html", "content": "Asterfall was a gleaming capital terraced around the rim of a starfall crater, its districts stitched together by airy skybridges and constellations of slow-drifting lanterns. Whitestone arcs and glas"}, {"title": "Asterian Concord", "type": "Faction", "url": "entities/factions/asterian-concord.html", "content": "The Asterian Concord is a ruling council seated in Asterfall, where archmages and highborn peers share power in a carefully negotiated balance. Formed to keep the city\u2019s arcane might and noble wealth "}, {"title": "Tide Court", "type": "Faction", "url": "entities/factions/tide-court.html", "content": "The Tide Court\u2014also known simply as the Tide Court\u2014is a rotating council of guildmasters that loosely governs Mirehollow from the stilted Tidemoot Hall above the brackish docks. Seats pass with the tu"}, {"title": "The Weavers' Guild", "type": "Faction", "url": "entities/factions/the-weavers-guild.html", "content": "The Weavers\u2019 Guild, also known simply as the Weavers' Guild, is the custodial order that tends the city\u2019s fate-threads and maintains the stabilizing wards of the Loomspire District. Their domain is th"}, {"title": "Session 001", "type": "Session", "url": "sessions/session-001/summary.html", "content": "During the Starfall Convergence in Astor Falls\u2019 Upper District, Thalen studied star charts while Kivra juggled fried dough and drinks and Brother Moss listened to uneasy water. Lyrian Vost recruited t"}, {"title": "Session 002", "type": "Session", "url": "sessions/session-002/summary.html", "content": "On the Observatory\u2019s peak, the party steadied the astral engine as a hairline crack split the sky over Astor Falls. Lyrian Vost traced the accelerating chaos to the Weavers\u2019 Guild in the Loomspire Dis"}];
// Tapestry Static Site Core
(function() {
    'use strict';

    // Mobile menu toggle
    window.toggleMenu = function() {
        const sidebar = document.querySelector('.sidebar');
        if (sidebar) {
            sidebar.classList.toggle('open');
        }
    };

    // Entity preview tooltip
    let tooltip = null;
    let tooltipTimeout = null;
    let hideTimeout = null;

    function createTooltip() {
        if (tooltip) return tooltip;
        tooltip = document.createElement('div');
        tooltip.className = 'entity-tooltip';
        document.body.appendChild(tooltip);
        return tooltip;
    }

    function showTooltip(link, e) {
        const name = link.dataset.entityName;
        const type = link.dataset.entityType;
        const preview = link.dataset.entityPreview;
        const image = link.dataset.entityImage;

        if (!name) return;

        clearTimeout(hideTimeout);

        tooltipTimeout = setTimeout(() => {
            const tt = createTooltip();

            let html = '';
            if (image) {
                html += `<img src="${image}" alt="${name}" class="entity-tooltip-image" onerror="this.style.display='none'">`;
            }
            html += `<div class="entity-tooltip-name">${name}</div>`;
            if (type) {
                const typeLabel = type.replace(/s$/, '');
                html += `<div class="entity-tooltip-type">${typeLabel}</div>`;
            }
            if (preview) {
                html += `<div class="entity-tooltip-description">${preview}</div>`;
            }

            tt.innerHTML = html;

            // Position tooltip
            const rect = link.getBoundingClientRect();

            let left = rect.left + (rect.width / 2) - 140;
            let top = rect.top - 10;

            // Adjust for viewport edges
            if (left < 10) left = 10;
            if (left + 280 > window.innerWidth - 10) {
                left = window.innerWidth - 290;
            }

            // Position above or below link
            tt.style.left = left + 'px';
            if (top - tt.offsetHeight < 10) {
                tt.style.top = (rect.bottom + 10) + 'px';
            } else {
                tt.style.top = (top - tt.offsetHeight) + 'px';
            }

            tt.classList.add('visible');
        }, 300);
    }

    function hideTooltip() {
        clearTimeout(tooltipTimeout);
        hideTimeout = setTimeout(() => {
            if (tooltip) {
                tooltip.classList.remove('visible');
            }
        }, 100);
    }

    // Attach tooltip listeners to entity links
    document.addEventListener('mouseover', function(e) {
        const link = e.target.closest('.entity-link');
        if (link && link.dataset.entityName) {
            showTooltip(link, e);
        }
    });

    document.addEventListener('mouseout', function(e) {
        const link = e.target.closest('.entity-link');
        if (link) {
            hideTooltip();
        }
    });
})();

// Tapestry Static Site Search
(function() {
    'use strict';

    let searchIndex = [];
    let searchInput = null;
    let resultsContainer = null;
    let indexBasePath = '';

    // Initialize search when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
        searchInput = document.getElementById('search-input');
        resultsContainer = document.getElementById('search-results');

        if (!searchInput || !resultsContainer) return;

        // Get the base path from the data attribute (handles different page depths)
        indexBasePath = searchInput.dataset.basePath || '';

        // Use embedded index if available (works with file:// and http://)
        // Falls back to fetch for remote hosting without embedded index
        if (typeof TAPESTRY_SEARCH_INDEX !== 'undefined') {
            searchIndex = TAPESTRY_SEARCH_INDEX;
        } else {
            // Fallback: try to fetch (only works with http://, not file://)
            const indexPath = indexBasePath + 'assets/search-index.json';
            fetch(indexPath)
                .then(response => response.json())
                .then(data => { searchIndex = data; })
                .catch(() => { console.log('Search index not available'); });
        }

        // Add event listeners
        searchInput.addEventListener('input', debounce(performSearch, 200));
        searchInput.addEventListener('keydown', handleKeyDown);
    });

    function performSearch() {
        const query = searchInput.value.toLowerCase().trim();

        if (query.length < 2) {
            resultsContainer.innerHTML = '';
            resultsContainer.style.display = 'none';
            return;
        }

        const results = searchIndex.filter(item => {
            return item.title.toLowerCase().includes(query) ||
                   (item.content && item.content.toLowerCase().includes(query));
        }).slice(0, 10);

        displayResults(results, query);
    }

    function displayResults(results, query) {
        if (results.length === 0) {
            resultsContainer.innerHTML = '<div class="search-no-results">No results found</div>';
            resultsContainer.style.display = 'block';
            return;
        }

        const html = results.map(item => {
            const highlight = highlightMatch(item.title, query);
            // Prepend base path for correct relative URLs from any page depth
            const url = indexBasePath + item.url;
            return `
                <a href="${url}" class="search-result-item">
                    <div class="search-result-type">${item.type}</div>
                    <div class="search-result-title">${highlight}</div>
                </a>
            `;
        }).join('');

        resultsContainer.innerHTML = html;
        resultsContainer.style.display = 'block';
    }

    function highlightMatch(text, query) {
        const regex = new RegExp(`(${escapeRegex(query)})`, 'gi');
        return text.replace(regex, '<mark>$1</mark>');
    }

    function escapeRegex(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }

    function handleKeyDown(e) {
        if (e.key === 'Escape') {
            searchInput.value = '';
            resultsContainer.innerHTML = '';
            resultsContainer.style.display = 'none';
        }
    }

    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
})();
</script>
</body>
</html>